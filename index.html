<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flatfile Integration</title>
  <script src="https://unpkg.com/@flatfile/javascript@^0.3.1/dist/index.js"></script>
  <script src="./blueprint.js"></script>
  <script src="./emailValidationHook.js"></script>
</head>
<body>
  <script>
    window.onload = function() {
      FlatFileJavaScript.startFlatfile({
        publishableKey: "XXX",
        sheet: blueprint,
        hooks: {
          record: (record) => window.emailValidationHook(record)
        },
        onSubmit: async ({ sheet }) => {
          const data = await sheet.allData()
          console.log('onSubmit', data)
        },
        spaceBody: {
          namespace: "portal",
        },
      })
    }
  </script>
</body>
</html>
